# Two-Factor Authentication (2FA) System

This project demonstrates a simple Two-Factor Authentication (2FA) system using Python. It generates a Time-based One-Time Password (TOTP) that can be verified through authenticator apps like Google Authenticator. The project includes generating a QR code that users can scan to easily set up 2FA.

## Table of Contents

- [Features](#features)
- [Prerequisites](#prerequisites)
- [Installation](#installation)
- [Code Structure](#code-structure)
- [Project Structure](#project-structure)
- [Usage](#usage)
- [Additional Notes](#additional-notes)
- [License](#license)

## Features

- Generate a unique secret key for each user.
- Create a QR code for easy setup in authenticator apps.
- Verify time-based OTPs to authenticate users.

## Prerequisites

- Python 3.x
- An authenticator app (e.g., Google Authenticator) to scan the QR code and generate OTPs.

## Installation

1. **Clone the repository**:
   ```bash
   git clone https://github.com/your-username/two_factor_auth_project.git
   cd two_factor_auth_project
   ```

2. **Create a virtual environment** (recommended):
   ```bash
   python3 -m venv venv
   source venv/bin/activate
   ```

3. **Install required dependencies**:
   ```bash
   pip install -r requirements.txt
   ```

## Code Structure

The core script (`2FA_Project_Code.py`) consists of several main parts:

1. **Generate a Secret Key**:
   - Uses the `pyotp` library to generate a base32 secret key.
   ```python
   secret = pyotp.random_base32()
   ```

2. **Generate a TOTP URI and Create QR Code**:
   - Generates a TOTP URI and creates a QR code using the `qrcode` library.
   ```python
   totp_uri = pyotp.totp.TOTP(secret).provisioning_uri(name="user@example.com", issuer_name="YourApp")
   qr = qrcode.make(totp_uri)
   qr.save("totp_qr_code.png")
   ```

3. **Prompt User for OTP**:
   - Asks the user to enter the OTP generated by their authenticator app.
   ```python
   otp_input = input("Enter the OTP from your authenticator app: ")
   ```

4. **Verify OTP**:
   - Uses the `pyotp` library to verify the OTP entered by the user.
   ```python
   totp = pyotp.TOTP(secret)
   if totp.verify(otp_input):
       print("Authentication successful!")
   else:
       print("Authentication failed. Please try again.")
   ```

5. **User-Friendly Error Handling and Retries**:
   - The system allows up to three attempts for OTP verification, ensuring the user has multiple chances to enter the correct OTP.
   
## Project Structure

The directory structure of the project is as follows:

```
2FA_Project/
├── venv/                 # Virtual environment directory (optional)
├── requirements.txt      # File containing required dependencies
├── README.md             # Project documentation
├── totp_qr_code.png      # QR code generated by the script
└── 2FA_Project_Code.py   # Python script for the 2FA system
```

- `2FA_Project_Code.py`: The main Python script for the 2FA system.
- `totp_qr_code.png`: The generated QR code file that can be scanned with an authenticator app.
- `requirements.txt`: Contains the list of dependencies required for the project.
- `README.md`: This file contains detailed information about the project.

## Usage

1. **Run the script**:
   ```bash
   python3 2FA_Project_Code.py
   ```

2. **Follow the prompts**:
   - The script will display a secret key and generate a QR code image named `totp_qr_code.png`.
   - Open `totp_qr_code.png` and scan it with an authenticator app (such as Google Authenticator).
   - The app will start generating OTPs based on the shared secret key.

3. **Enter the OTP**:
   - The script will prompt you to enter the OTP displayed in your authenticator app.
   - Enter the OTP, and the script will verify if it’s correct.

4. **Authentication result**:
   - If the OTP is correct, the script will print "[SUCCESS] Authentication successful!".
   - If the OTP is incorrect, the script will print "[ERROR] Authentication failed. Please try again." The system will allow up to three attempts to enter the correct OTP.

## Additional Notes

- **Virtual Environment Activation**: Remember to activate the virtual environment each time before running the script using the following command:
  ```bash
  source venv/bin/activate
  ```

- **QR Code Viewing**: To view the generated QR code, use an image viewer like this:
  ```bash
  xdg-open totp_qr_code.png
  ```

- **Deactivating Virtual Environment**: When you're done, deactivate the virtual environment with:
  ```bash
  deactivate
  ```

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.
